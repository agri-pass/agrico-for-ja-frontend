# è¾²åœ°ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  é–‹ç™ºã‚¬ã‚¤ãƒ‰

## ğŸš€ é–‹ç™ºãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—

### Phase 1: MVPå®Ÿè£…ï¼ˆWeek 1-2ï¼‰
æœ€å°é™ã®æ©Ÿèƒ½ã§å‹•ä½œã™ã‚‹ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—ã‚’æ§‹ç¯‰

#### Sprint 1.1: åŸºç›¤æ§‹ç¯‰
- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- [x] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ
- [ ] åŸºæœ¬ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®ä½œæˆ
- [ ] TypeScriptå‹å®šç¾©ã®å®Ÿè£…
- [ ] åŸºæœ¬ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ

#### Sprint 1.2: åœ°å›³æ©Ÿèƒ½å®Ÿè£…
- [ ] Leafletåœ°å›³ã®è¡¨ç¤º
- [ ] ã¿ã‚„ã¾å¸‚ã‚’ä¸­å¿ƒã¨ã—ãŸåˆæœŸè¡¨ç¤º
- [ ] ã‚ºãƒ¼ãƒ ãƒ»ãƒ‘ãƒ³æ©Ÿèƒ½
- [ ] ã‚µãƒ³ãƒ—ãƒ«è¾²åœ°ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆ

#### Sprint 1.3: ãƒãƒªã‚´ãƒ³è¡¨ç¤º
- [ ] è¾²åœ°ãƒãƒªã‚´ãƒ³ã®è¡¨ç¤º
- [ ] åŸºæœ¬çš„ãªãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—è¡¨ç¤º
- [ ] é™çš„ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿

### Phase 2: åŸºæœ¬æ©Ÿèƒ½å®Ÿè£…ï¼ˆWeek 3-4ï¼‰
ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã•ã›ã‚‹åŸºæœ¬æ©Ÿèƒ½ã®è¿½åŠ 

#### Sprint 2.1: è€•ä½œè€…æ©Ÿèƒ½
- [ ] è€•ä½œè€…åˆ¥ã®è‰²åˆ†ã‘å®Ÿè£…
- [ ] å‡¡ä¾‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ
- [ ] è€•ä½œè€…ãƒ‡ãƒ¼ã‚¿ã®ç®¡ç†

#### Sprint 2.2: æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿
- [ ] æ¤œç´¢ãƒãƒ¼ã®å®Ÿè£…
- [ ] åŸºæœ¬çš„ãªãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
- [ ] æ¤œç´¢çµæœã®ãƒã‚¤ãƒ©ã‚¤ãƒˆè¡¨ç¤º

#### Sprint 2.3: UIæ”¹å–„
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¯¾å¿œ
- [ ] ã‚µã‚¤ãƒ‰ãƒ‘ãƒãƒ«ã®å®Ÿè£…
- [ ] ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ»ãƒ•ãƒƒã‚¿ãƒ¼ã®æ•´å‚™

### Phase 3: æ‹¡å¼µæ©Ÿèƒ½å®Ÿè£…ï¼ˆWeek 5-6ï¼‰
ãƒ‡ãƒ¼ã‚¿åˆ†æã¨å¯è¦–åŒ–æ©Ÿèƒ½ã®è¿½åŠ 

#### Sprint 3.1: çµ±è¨ˆæ©Ÿèƒ½
- [ ] çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®å®Ÿè£…
- [ ] ã‚°ãƒ©ãƒ•ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¿½åŠ 
- [ ] ãƒ‡ãƒ¼ã‚¿é›†è¨ˆãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…

#### Sprint 3.2: é«˜åº¦ãªãƒ•ã‚£ãƒ«ã‚¿
- [ ] è¤‡æ•°æ¡ä»¶ãƒ•ã‚£ãƒ«ã‚¿
- [ ] é¢ç©ç¯„å›²ãƒ•ã‚£ãƒ«ã‚¿
- [ ] ä½œç‰©åˆ¥ãƒ•ã‚£ãƒ«ã‚¿

#### Sprint 3.3: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆãƒ™ãƒ¼ã‚¹ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
- [ ] ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°
- [ ] é…å»¶ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

## ğŸ›  é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
git clone [repository-url]
cd agrico-for-ja-frontend
```

### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
npm install
```

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
`.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼š
```env
# åœ°å›³è¨­å®š
NEXT_PUBLIC_MAP_CENTER_LAT=33.1525
NEXT_PUBLIC_MAP_CENTER_LNG=130.4544
NEXT_PUBLIC_MAP_DEFAULT_ZOOM=13

# APIè¨­å®šï¼ˆå°†æ¥ä½¿ç”¨ï¼‰
NEXT_PUBLIC_API_URL=http://localhost:3001
```

### 4. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
```bash
npm run dev
# http://localhost:6000 ã§ã‚¢ã‚¯ã‚»ã‚¹
```

## ğŸ“ ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### TypeScript
```typescript
// âœ… è‰¯ã„ä¾‹
interface Props {
  farmland: Farmland;
  onClick?: (id: string) => void;
}

// âŒ æ‚ªã„ä¾‹
interface Props {
  farmland: any;
  onClick?: Function;
}
```

### React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```typescript
// âœ… é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ + TypeScript
export const FarmlandCard: React.FC<Props> = ({ farmland, onClick }) => {
  // ãƒ­ã‚¸ãƒƒã‚¯
  return <div>...</div>;
};

// âœ… ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®ä½¿ç”¨
const { data, loading, error } = useFarmlands();
```

### ãƒ•ã‚¡ã‚¤ãƒ«å‘½åè¦å‰‡
```
components/
  FarmlandCard.tsx       # PascalCase for components
  useFarmlands.ts        # camelCase for hooks
  mapUtils.ts            # camelCase for utilities
  constants.ts           # lowercase for constants
```

### CSS/Tailwind
```tsx
// âœ… Tailwind ã‚¯ãƒ©ã‚¹ã®ä½¿ç”¨
<div className="p-4 bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow">

// âœ… æ¡ä»¶ä»˜ãã‚¯ãƒ©ã‚¹
<div className={cn(
  "base-class",
  isActive && "active-class",
  isDisabled && "disabled-class"
)}>
```

## ğŸ§ª ãƒ†ã‚¹ãƒˆå®Ÿè£…

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
```typescript
// utils/mapUtils.test.ts
describe('mapUtils', () => {
  describe('calculateArea', () => {
    it('should calculate polygon area correctly', () => {
      const polygon = [[...]];
      const area = calculateArea(polygon);
      expect(area).toBe(3000);
    });
  });
});
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ
```typescript
// components/FarmlandCard.test.tsx
describe('FarmlandCard', () => {
  it('should render farmland information', () => {
    const farmland = mockFarmland();
    render(<FarmlandCard farmland={farmland} />);
    expect(screen.getByText(farmland.properties.farmer.name)).toBeInTheDocument();
  });
});
```

## ğŸ¨ UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…ä¾‹

### è¾²åœ°ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
```typescript
// components/UI/FarmlandCard.tsx
import React from 'react';
import { Farmland } from '@/types';

interface FarmlandCardProps {
  farmland: Farmland;
  onSelect?: (id: string) => void;
}

export const FarmlandCard: React.FC<FarmlandCardProps> = ({
  farmland,
  onSelect
}) => {
  const { properties } = farmland;
  const area = (properties.landInfo.area / 10000).toFixed(2); // ã¡ to ha
  
  return (
    <div 
      className="p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow cursor-pointer"
      onClick={() => onSelect?.(farmland.id)}
    >
      <div className="flex justify-between items-start mb-2">
        <h3 className="font-semibold text-lg">
          {properties.location.lotNumber}
        </h3>
        <span className="px-2 py-1 bg-green-100 text-green-800 rounded text-sm">
          {properties.landInfo.landType}
        </span>
      </div>
      
      <p className="text-gray-600 text-sm mb-1">
        {properties.location.address}
      </p>
      
      <div className="flex justify-between items-center mt-3">
        <span className="text-sm text-gray-500">
          è€•ä½œè€…: {properties.farmer.name}
        </span>
        <span className="font-medium">
          {area} ha
        </span>
      </div>
    </div>
  );
};
```

### ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯å®Ÿè£…ä¾‹
```typescript
// hooks/useFarmlands.ts
import { useState, useEffect, useMemo } from 'react';
import { Farmland, SearchCriteria } from '@/types';
import { fetchFarmlands } from '@/lib/api';

export const useFarmlands = (criteria?: SearchCriteria) => {
  const [farmlands, setFarmlands] = useState<Farmland[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<Error | null>(null);
  
  useEffect(() => {
    const loadFarmlands = async () => {
      try {
        setLoading(true);
        const data = await fetchFarmlands(criteria);
        setFarmlands(data);
      } catch (err) {
        setError(err as Error);
      } finally {
        setLoading(false);
      }
    };
    
    loadFarmlands();
  }, [criteria]);
  
  const stats = useMemo(() => {
    return {
      total: farmlands.length,
      totalArea: farmlands.reduce((sum, f) => 
        sum + f.properties.landInfo.area, 0
      ),
      farmers: new Set(farmlands.map(f => 
        f.properties.farmer.id
      )).size
    };
  }, [farmlands]);
  
  return { farmlands, loading, error, stats };
};
```

## ğŸ—º åœ°å›³å®Ÿè£…ã®ãƒã‚¤ãƒ³ãƒˆ

### Leafletå‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
```typescript
// components/Map/MapContainer.tsx
import dynamic from 'next/dynamic';

const DynamicMap = dynamic(
  () => import('./LeafletMap'),
  { 
    ssr: false,
    loading: () => <div>åœ°å›³ã‚’èª­ã¿è¾¼ã¿ä¸­...</div>
  }
);
```

### ãƒãƒªã‚´ãƒ³æç”»ã®æœ€é©åŒ–
```typescript
// è¡¨ç¤ºç¯„å›²å†…ã®ãƒãƒªã‚´ãƒ³ã®ã¿ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
const visibleFarmlands = useMemo(() => {
  if (!map) return farmlands;
  
  const bounds = map.getBounds();
  return farmlands.filter(farmland => {
    const { bbox } = farmland;
    return bounds.intersects([
      [bbox.minLat, bbox.minLng],
      [bbox.maxLat, bbox.maxLng]
    ]);
  });
}, [farmlands, mapBounds]);
```

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### React.memoã®æ´»ç”¨
```typescript
export const FarmlandPolygon = React.memo(({ 
  farmland, 
  color, 
  onClick 
}: Props) => {
  // ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…
}, (prevProps, nextProps) => {
  // ã‚«ã‚¹ã‚¿ãƒ æ¯”è¼ƒãƒ­ã‚¸ãƒƒã‚¯
  return prevProps.farmland.id === nextProps.farmland.id &&
         prevProps.color === nextProps.color;
});
```

### useMemoã¨useCallbackã®ä½¿ç”¨
```typescript
const filteredFarmlands = useMemo(() => 
  farmlands.filter(f => /* ãƒ•ã‚£ãƒ«ã‚¿æ¡ä»¶ */),
  [farmlands, filters]
);

const handleFarmlandClick = useCallback((id: string) => {
  // ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
}, []);
```

## ğŸ› ãƒ‡ãƒãƒƒã‚°ã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºæ–¹æ³•

#### 1. Leafletã®å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚¨ãƒ©ãƒ¼
```typescript
// å•é¡Œ: window is not defined
// è§£æ±º: dynamic importã§SSRã‚’ç„¡åŠ¹åŒ–
const Map = dynamic(() => import('./Map'), { ssr: false });
```

#### 2. ãƒãƒªã‚´ãƒ³ãŒè¡¨ç¤ºã•ã‚Œãªã„
```typescript
// å•é¡Œ: åº§æ¨™ã®é †åºãŒé–“é•ã£ã¦ã„ã‚‹
// è§£æ±º: [çµŒåº¦, ç·¯åº¦]ã®é †åºã‚’ç¢ºèª
coordinates: [[lng, lat], [lng, lat], ...]  // âœ… æ­£ã—ã„
coordinates: [[lat, lng], [lat, lng], ...]  // âŒ é–“é•ã„
```

#### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ
```typescript
// å•é¡Œ: å¤§é‡ã®ãƒãƒªã‚´ãƒ³ã§é…ã„
// è§£æ±º: ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆãƒ™ãƒ¼ã‚¹ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
const visibleItems = items.filter(isInViewport);
```

## ğŸ“¦ ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤

### ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰
```bash
# ãƒ“ãƒ«ãƒ‰
npm run build

# ãƒ“ãƒ«ãƒ‰çµæœã®ç¢ºèª
npm run start
```

### ãƒ“ãƒ«ãƒ‰ã®æœ€é©åŒ–
```javascript
// next.config.js
module.exports = {
  images: {
    domains: ['tile.openstreetmap.org'],
  },
  compiler: {
    removeConsole: process.env.NODE_ENV === 'production',
  },
};
```

## ğŸ”— å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Next.js Documentation](https://nextjs.org/docs)
- [Leaflet Documentation](https://leafletjs.com/reference.html)
- [React-Leaflet Documentation](https://react-leaflet.js.org/)
- [Tailwind CSS Documentation](https://tailwindcss.com/docs)

### ãƒ„ãƒ¼ãƒ«
- [GeoJSON.io](https://geojson.io/) - GeoJSONãƒ‡ãƒ¼ã‚¿ã®ä½œæˆãƒ»ç·¨é›†
- [Mapbox Studio](https://studio.mapbox.com/) - ã‚«ã‚¹ã‚¿ãƒ åœ°å›³ã‚¹ã‚¿ã‚¤ãƒ«
- [Color Hunt](https://colorhunt.co/) - ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆé¸æŠ

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

### ãƒ–ãƒ©ãƒ³ãƒæˆ¦ç•¥
```
main            # æœ¬ç•ªç’°å¢ƒ
â”œâ”€â”€ develop     # é–‹ç™ºç’°å¢ƒ
    â”œâ”€â”€ feature/map-display    # æ©Ÿèƒ½é–‹ç™º
    â”œâ”€â”€ feature/search        # æ©Ÿèƒ½é–‹ç™º
    â””â”€â”€ fix/polygon-render    # ãƒã‚°ä¿®æ­£
```

### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
```
feat: è¾²åœ°ãƒãƒªã‚´ãƒ³ã®è¡¨ç¤ºæ©Ÿèƒ½ã‚’è¿½åŠ 
fix: ãƒãƒªã‚´ãƒ³ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ã‚¨ãƒ©ãƒ¼ã‚’ä¿®æ­£
docs: READMEã‚’æ›´æ–°
style: ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’çµ±ä¸€
refactor: åœ°å›³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
test: è¾²åœ°ã‚«ãƒ¼ãƒ‰ã®ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ 
chore: ä¾å­˜é–¢ä¿‚ã‚’æ›´æ–°
```

### ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
1. featureãƒ–ãƒ©ãƒ³ãƒã‚’ä½œæˆ
2. å¤‰æ›´ã‚’å®Ÿè£…
3. ãƒ†ã‚¹ãƒˆã‚’è¿½åŠ /æ›´æ–°
4. developãƒ–ãƒ©ãƒ³ãƒã¸PRä½œæˆ
5. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼
6. ãƒãƒ¼ã‚¸